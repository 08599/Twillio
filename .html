<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twilio Script Injector</title>
    <script>
        window.onload = function() {
            // Abre a página do Twilio em uma nova aba
            window.open("https://flex.twilio.com/teams/tasks/WRf7e48e680770dcee37d1672b612d0500", "_blank");

            // Adiciona o seu script personalizado após a página abrir
            (function() {
                const style = document.createElement('style');
                style.type = 'text/css';
                style.innerHTML = `
                    .blinking {
                        animation: blinkingText 1s infinite;
                    }

                    @keyframes blinkingText {
                        0% { color: #ff0000; }
                        50% { color: transparent; }
                        100% { color: #ff0000; }
                    }

                    /* Seu CSS personalizado aqui... */
                    /* Pode incluir mais estilos ou funcionalidades */
                `;
                document.head.appendChild(style);

                let fontSize = 15;
                let graphFontSize = 14; // Tamanho de fonte para o gráfico
                let alertThresholdMinutes = 10;
                let currentDate = new Date().toLocaleDateString();
                let taskCountsByHour = loadTimelineData();  // Carrega a contagem de tasks por hora do localStorage
                let closedTasksByHour = loadClosedTaskData(); // Carrega a contagem de tasks encerradas por hora

                const collaborators = [
                    { id: '#WK2ad4aa20cf6d8dc4770d1c737d29d029', name: 'Janaina Pereira' },
                    { id: '#WKa826cefc2a4cab9bd9bc646555f89175', name: 'Marina Deodato' },
                    { id: '#WK70bea86d7b208e4954b261354d0b9a37', name: 'Thaiany Sara' },
                    { id: '#WKbc92d49dffb56002d7b347463d6a2dbd', name: 'Patrícia Monteiro' },
                    { id: '#WK81f209e64aeb85182285093b371d3b23', name: 'Ariane Loureiro' },
                    { id: '#WKef989aa8b1b66b44a36b70e4919cb6f9', name: 'Emanuelly F.' },
                    { id: '#WK7783140c8c8b5574cbda415a29eb7663', name: 'Alesandra Nascimento' },
                    { id: '#WK1483b43f8e92ab41c29aab7e9e930b6a', name: 'Rafael Bandeira' },
                ];

                const previousChatCounts = {};
                const newTaskTimes = {};
                const closedTaskTimes = {};
                const newTaskStyles = {};
                const closedTaskStyles = {};
                let clientsServed = {};
                const closedTaskCounts = {};
                let isAlertActive = true;
                let sortColumnIndex = -1;
                let sortDirection = 'asc';

                // Função para criar o modal
                function createModal() {
                    const modal = document.createElement('div');
                    modal.id = 'modal';
                    modal.style.position = 'fixed';
                    modal.style.top = '50px';
                    modal.style.left = '50px';
                    modal.style.width = '1100px';
                    modal.style.height = '600px';
                    modal.style.backgroundColor = '#1d1d1d';
                    modal.style.border = '1px solid #000';
                    modal.style.padding = '20px';
                    modal.style.zIndex = '1000';
                    modal.style.overflow = 'hidden';
                    modal.style.borderRadius = '10px';
                    modal.style.boxShadow = '0 0 20px rgba(0, 255, 255, 0.7)';
                    modal.style.color = '#fff';
                    modal.style.fontSize = `${fontSize}px`;
                    modal.style.resize = 'both'; // Permitir redimensionamento do modal

                    // Código do modal continua aqui...
                    document.body.appendChild(modal);
                }

                // Funções auxiliares
                function loadTimelineData() {
                    const savedData = localStorage.getItem('taskCountsByHour');
                    return savedData ? JSON.parse(savedData) : Array(10).fill(0);
                }

                function loadClosedTaskData() {
                    const savedData = localStorage.getItem('closedTasksByHour');
                    return savedData ? JSON.parse(savedData) : Array(10).fill(0);
                }

                createModal();
            })();

        };
    </script>
</head>
<body>
    <h1>Abrindo Twilio e injetando script...</h1>
</body>
</html>
